<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HEEMS | Product Details</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Archivo:ital,wght@0,100..900;1,100..900&family=Space+Grotesk:wght@300..700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        brownsugar: "#AF6B41",
                        bistre: "#4C3329",
                        mauveine: "#DC2F02",
                        imperialred: "#FB3A48",
                        aquamarine: "#28EEB6",
                        yellowish: "#FBDA58",
                        orange: "#FAA049",
                        red2: "#C01A27",
                        pinkish: "#B51490",
                        purpletext: "#a178b7",
                        darkbg: "#1a0f1a",
                        fabric: "#f5f0e8",
                    },
                    fontFamily: {
                        bungee: ["Bungee Spice", "cursive"],
                        archivo: ["Archivo", "sans-serif"],
                        space: ["Space Grotesk", "sans-serif"],
                    },
                    animation: {
                        float: "float 6s ease-in-out infinite",
                        "float-reverse": "float 6s ease-in-out infinite reverse",
                        "pulse-slow": "pulse 8s cubic-bezier(0.4, 1, 0.6, 1) infinite",
                        "text-gradient": "text-gradient 8s linear infinite",
                        marquee: "marquee 20s linear infinite",
                        "fade-in": "fadeIn 1.5s ease-out forwards",
                        "slide-up": "slideUp 1.2s ease-out forwards",
                        "tilt-shake": "tilt-shake 0.5s ease-in-out",
                    },
                    keyframes: {
                        float: {
                            "0%, 100%": { transform: "translateY(0)" },
                            "50%": { transform: "translateY(-20px)" },
                        },
                        "text-gradient": {
                            "0%": { "background-position": "0% 50%" },
                            "50%": { "background-position": "100% 50%" },
                            "100%": { "background-position": "0% 50%" },
                        },
                        marquee: {
                            "0%": { transform: "translateX(0)" },
                            "100%": { transform: "translateX(-100%)" },
                        },
                        fadeIn: {
                            "0%": { opacity: 0 },
                            "100%": { opacity: 1 },
                        },
                        slideUp: {
                            "0%": { opacity: 0, transform: "translateY(40px)" },
                            "100%": { opacity: 1, transform: "translateY(0)" },
                        },
                        "tilt-shake": {
                            "0%, 100%": { transform: "rotate(0deg)" },
                            "25%": { transform: "rotate(-5deg)" },
                            "75%": { transform: "rotate(5deg)" },
                        },
                    },
                },
            },
        };
    </script>
    <style>
        @font-face {
            font-family: 'CodepotroAbuSayed';
            src: url('assets/fonts/CodepotroAbuSayed.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'HindSiliguri';
            src: url('assets/fonts/HindSiliguri-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        html {
            font-size: 14px;
            scroll-behavior: smooth;
        }
        body {
            font-family: "Archivo", sans-serif;
            background-color: #0b0b10;
            color: #f5f0e8;
            overflow-x: hidden;
        }
        .text-stroke {
            -webkit-text-stroke: 1px currentColor;
            color: transparent;
        }
        .gradient-text {
            background: linear-gradient(90deg, #fb3a48, #DC2F02, #28eeb6);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .fabric-texture {
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.059 1.645-.073 4.849-.073z' fill='%23af6b41' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .text-shuffle {
            display: inline-block;
            position: relative;
        }
        .text-shuffle span {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .text-shuffle span.active {
            opacity: 1;
            transform: translateY(0);
        }
        .menu-item {
            position: relative;
        }
        .menu-item:after {
            content: "";
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: currentColor;
            transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .menu-item:hover:after {
            width: 100%;
        }
        .border-animate {
            position: relative;
        }
        .border-animate:before {
            content: "";
            position: absolute;
            inset: 0;
            border: 2px solid transparent;
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            border-radius: inherit;
            animation: text-gradient 8s linear infinite;
            background-size: 300% 300%;
        }
        .filter-btn.active {
            background-color: #4C3329;
            color: #f5f0e8;
        }
        .product-modal {
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateY(20px);
        }
        .product-modal.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .modal-overlay {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }
        .size-option {
            transition: all 0.2s ease;
        }
        .size-option:hover {
            transform: scale(1.1);
        }
        .size-option.selected {
            background-color: #AF6B41;
            color: #f5f0e8;
            border-color: #AF6B41;
        }
        .size-option.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            text-decoration: line-through;
        }
        .color-option {
            transition: all 0.2s ease;
        }
        .color-option:hover {
            transform: scale(1.1);
        }
        .color-option.selected {
            outline: 2px solid #AF6B41;
            outline-offset: 2px;
        }
        .quantity-selector button {
            transition: all 0.2s ease;
        }
        .quantity-selector button:hover {
            background-color: #AF6B41;
            color: #f5f0e8;
        }
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .mobile-menu.open {
            transform: translateX(0);
        }
        /* Product Detail Page Specific Styles */
        .product-gallery {
            height: 500px;
        }
        .product-thumbnails {
            height: 500px;
        }
        .thumbnail {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .thumbnail:hover {
            opacity: 0.8;
        }
        .thumbnail.active {
            border: 2px solid #AF6B41;
        }
        .zoom-container {
            position: relative;
            overflow: hidden;
        }
        .zoom-result {
            position: absolute;
            width: 300px;
            height: 300px;
            border: 1px solid #AF6B41;
            border-radius: 4px;
            background-repeat: no-repeat;
            display: none;
            z-index: 100;
            pointer-events: none;
        }
        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #AF6B41;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 4px;
            background: #f5f0e8;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }
        .progress-bar {
            height: 100%;
            background: #AF6B41;
            width: 0%;
            transition: width 0.4s ease;
        }
        .stock-indicator {
            height: 4px;
            background-color: rgba(245, 240, 232, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }
        .stock-progress {
            height: 100%;
            background-color: #28EEB6;
            transition: width 0.5s ease;
        }
        @media (max-width: 768px) {
            .product-gallery {
                height: 350px;
            }
            .product-thumbnails {
                height: auto;
                flex-direction: row;
                overflow-x: auto;
                padding-bottom: 1rem;
            }
            .thumbnail {
                min-width: 80px;
                height: 80px;
            }
            .zoom-result {
                display: none !important;
            }
        }
    </style>
    <style>
        /* ========= Vice City scoped theme (product page) ========= */
        .vp-page.vc-dark {
            background:
                radial-gradient(1200px 600px at 50% 20%, rgba(251, 58, 72, 0.10), transparent 60%),
                radial-gradient(900px 500px at 15% 85%, rgba(181, 20, 144, 0.10), transparent 70%),
                linear-gradient(180deg, #0b0b10, #1a0f1a);
        }
        .vp-page .text-bistre { color: #f5f0e8; }
        .vp-page .text-bistre\/70 { color: rgba(245, 240, 232, 0.7); }
        .vp-page .vp-card {
            background: linear-gradient(180deg, rgba(10,10,14,0.95), rgba(26,15,26,0.9));
            border: 1px solid rgba(181, 20, 144, 0.25);
            box-shadow:
                0 1px 0 rgba(255, 255, 255, 0.04) inset,
                0 0 0 0 rgba(181, 20, 144, 0.25);
        }
        .vp-page .vp-card:hover {
            box-shadow:
                0 0 0 6px rgba(181, 20, 144, 0.08),
                0 18px 40px rgba(0, 0, 0, 0.35),
                0 0 26px rgba(181, 20, 144, 0.35);
        }
        /* Loading + progress */
        .vp-page #loading-overlay { background: rgba(10,10,14,0.92); }
        .vp-page .progress-container { background: #1a1a1f; }
        .vp-page .progress-bar { background: #28EEB6; }
        /* Related product cards to match collections */
        .vp-page .collection-card { 
            background: linear-gradient(180deg, rgba(10,10,14,0.95), rgba(26,15,26,0.9));
            border: 1px solid rgba(181, 20, 144, 0.25);
            box-shadow: 0 1px 0 rgba(255,255,255,0.04) inset;
        }
        .vp-page .collection-overlay {
            background: linear-gradient(to top, rgba(10, 10, 14, 0.95) 0%, rgba(0, 0, 0, 0) 100%);
        }
    </style>
    <style>
        :root {
            --bg1: #0B0B10; /* Near-black primary background */
            --bg2: #1a0f13; /* Slightly lighter secondary background */
            --glow: #FB3A48; /* Imperial red for glowing effects */
            --glow2: #C01A27; /* Deep red accent */
        }

        @font-face {
            font-family: "CodepotroAbuSayed";
            src: url("assets/fonts/CodepotroAbuSayed.woff") format("woff");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: "HindSiliguri";
            src: url("assets/fonts/HindSiliguri-Regular.woff2") format("woff2");
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 14px;
            scroll-behavior: smooth;
        }

        body {
            font-family: "Archivo", sans-serif;
            background: radial-gradient(1200px 600px at 50% 20%, rgba(251, 58, 72, 0.12), transparent 60%), radial-gradient(800px 400px at 20% 80%, rgba(192, 26, 39, 0.16), transparent 70%), linear-gradient(180deg, var(--bg1), var(--bg2));
            color: #ffffff;
            overflow-x: hidden;
            height: 100vh;
        }

        .scanlines::before {
            content: "";
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(to bottom, rgba(255, 255, 255, 0.04) 0, rgba(255, 255, 255, 0.04) 1px, transparent 2px, transparent 3px);
            pointer-events: none;
            mix-blend-mode: soft-light;
        }

        .vignette::after {
            position: absolute;
            inset: -10%;
            pointer-events: none;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.6) 100%);
            mix-blend-mode: multiply;
        }

        .text-stroke {
            -webkit-text-stroke: 1px currentColor;
            color: transparent;
        }

        .gradient-text {
            background: linear-gradient(90deg, #fb3a48, #9a219e, #28eeb6);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .font-Hindsiligury {
            font-family: "HindSiliguri", sans-serif;
        }

        .font-code {
            font-family: "CodepotroAbuSayed", sans-serif;
        }

        .vertical-text {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
        }

        .upgrade-text {
            font-family: "Space Grotesk";
            font-weight: 700;
        }

        .font-limelight {
            font-family: "Limelight", serif;
        }

        .font-Sansation {
            font-family: "Sansation", sans-serif;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ff0080;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #121212 0%, #1a0f1a 50%, #2d1b2d 100%);
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .mobile-menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .mobile-close-btn {
            position: absolute;
            top: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            backdrop-filter: blur(10px);
            z-index: 999;
        }

        .mobile-close-btn:hover {
            background: rgba(255, 0, 128, 0.2);
            border-color: #ff0080;
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.3);
        }

        .mobile-close-btn svg {
            width: 24px;
            height: 24px;
            stroke: white;
            stroke-width: 2;
            transition: all 0.3s ease;
        }

        .mobile-close-btn:hover svg {
            stroke: #ff0080;
            transform: scale(1.1);
        }

        .mobile-nav-item {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            margin: 1.5rem 0;
            z-index: 1;
        }

        .mobile-nav-item.active {
            opacity: 1;
            transform: translateY(0);
        }

        .mobile-nav-item a {
            font-size: 2.5rem;
            font-weight: 600;
            color: white;
            text-decoration: none;
            position: relative;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .mobile-nav-item a::before {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff0080, #00ffff);
            transition: width 0.3s ease;
        }

        .mobile-nav-item a:hover::before {
            width: 100%;
        }

        .mobile-nav-item a:hover {
            color: #00ffff;
            transform: scale(1.05);
        }

        .hamburger {
            width: 30px;
            height: 30px;
            position: relative;
            cursor: pointer;
            z-index: 101;
        }

        .hamburger span {
            display: block;
            position: absolute;
            height: 3px;
            width: 100%;
            background: white;
            border-radius: 3px;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .hamburger span:nth-child(1) {
            top: 0px;
        }

        .hamburger span:nth-child(2) {
            top: 13px;
        }

        .hamburger span:nth-child(3) {
            top: 26px;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg);
            top: 13px;
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg);
            top: 13px;
        }

        @media (max-width: 768px) {
            .mobile-close-btn {
                top: 1.5rem;
                right: 1.5rem;
                width: 45px;
                height: 45px;
                z-index: 999;
            }

            .mobile-close-btn svg {
                width: 20px;
                height: 20px;
            }

            .mobile-nav-item a {
                font-size: 2rem;
                padding: 1rem 0;
                display: block;
                text-align: center;
            }

            .hamburger {
                width: 25px;
                height: 25px;
            }

            .hamburger span {
                height: 2px;
            }

            .hamburger span:nth-child(2) {
                top: 11px;
            }

            .hamburger span:nth-child(3) {
                top: 22px;
            }

            .hamburger.active span:nth-child(1),
            .hamburger.active span:nth-child(3) {
                top: 11px;
            }
        }

        .mybg {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 30px;
            border-radius: 0px;
            margin: 0 auto;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            top: 0;
            z-index: 1000;
        }

        .mybg-rounded {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 30px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 40px;
            margin: 0 auto;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            top: 0;
            z-index: 1000;
        }

        .font-bungee {
            font-family: 'Bungee Spice', cursive;
        }

        .menu-item {
            position: relative;
        }

        .menu-item:after {
            content: "";
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: currentColor;
            transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .menu-item:hover:after {
            width: 100%;
        }

        #loaderOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(34, 34, 34, 0.7);
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        /* Loader style matching your description */
        .loader {
            transform: rotateZ(45deg);
            perspective: 1000px;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            position: relative;
            color: #fff;
        }

        /* Pseudo-elements for animated parts of loader */
        .loader:before,
        .loader:after {
            content: '';
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: inherit;
            height: inherit;
            border-radius: 50%;
            transform: rotateX(70deg);
            animation: spin 1s linear infinite;
        }

        .loader:after {
            color: #FF3D00;
            transform: rotateY(70deg);
            animation-delay: 0.4s;
        }

        /* Spin animation for pseudo-elements */
        @keyframes spin {
            0%,
            100% {
                box-shadow: 0.2em 0px 0 0 currentColor;
            }

            12% {
                box-shadow: 0.2em 0.2em 0 0 currentColor;
            }

            25% {
                box-shadow: 0 0.2em 0 0 currentColor;
            }

            37% {
                box-shadow: -0.2em 0.2em 0 0 currentColor;
            }

            50% {
                box-shadow: -0.2em 0 0 0 currentColor;
            }

            62% {
                box-shadow: -0.2em -0.2em 0 0 currentColor;
            }

            75% {
                box-shadow: 0 -0.2em 0 0 currentColor;
            }

            87% {
                box-shadow: 0.2em -0.2em 0 0 currentColor;
            }
        }
        .content{
            min-height: 200vh;
        }

        /* Enhanced Image Section Responsiveness */
        @media (max-width: 1024px) {
            .product-gallery {
                height: 400px;
            }
        }
        @media (max-width: 768px) {
            .product-gallery {
                height: auto;
                min-height: 300px;
                max-height: 400px;
            }
            .product-thumbnails {
                flex-direction: row;
                overflow-x: auto;
                height: auto;
                gap: 0.5rem;
                padding: 0.5rem 0;
            }
            .thumbnail {
                min-width: 60px;
                height: 60px;
                flex-shrink: 0;
            }
            .zoom-container img {
                object-fit: contain !important;
            }
        }
        @media (max-width: 480px) {
            .product-gallery {
                height: auto;
                min-height: 250px;
            }
            .thumbnail {
                min-width: 50px;
                height: 50px;
            }
        }
    </style>
</head>
<body class="fabric-texture antialiased vc-dark vp-page">
    <!-- Progress Bar -->
    <div class="progress-container" id="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>
    <script>
        // Hide progress bar smoothly after it reaches 100%
        (function () {
            const progressBar = document.getElementById('progress-bar');
            const progressContainer = document.getElementById('progress-container');
            if (!progressBar || !progressContainer) return;
            // Listen for width change to 100%
            const observer = new MutationObserver(() => {
                if (progressBar.style.width === '100%') {
                    setTimeout(() => {
                        progressContainer.style.transition = 'opacity 0.5s';
                        progressContainer.style.opacity = '0';
                        setTimeout(() => {
                            progressContainer.style.display = 'none';
                        }, 500);
                    }, 1600);
                }
            });
            observer.observe(progressBar, { attributes: true, attributeFilter: ['style'] });
        })();
    </script>
    <!-- Loading Overlay -->
    <div id="loaderOverlay">
        <div class="loader"></div>
    </div>
    <!-- Animated Background Elements -->
    <div class="fixed inset-0 overflow-hidden -z-10">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-mauveine/10 blur-3xl animate-pulse-slow"></div>
        <div class="absolute top-3/4 right-1/4 w-96 h-96 rounded-full bg-aquamarine/10 blur-3xl animation-delay-2000">
        </div>
        <div
            class="absolute bottom-1/4 left-1/3 w-80 h-80 rounded-full bg-imperialred/10 blur-3xl animation-delay-4000">
        </div>
    </div>
    <div class="scanlines vignette"></div>
    <!-- Header (Navigation Bar) -->
    <header id="main-header" class="fixed top-0 left-0 w-full z-40 transition-all duration-300 ease-in-out py-6">
        <div id="logo-container" class="mybg flex flex-col items-center relative w-full">
            <div class="w-full flex justify-between items-center px-6 mb-6">
                <button id="mobile-menu-btn" class="hamburger md:hidden">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="w-16 hidden md:block"></div>
                <a href="landing.html" class="flex flex-col items-center">
                    <div class="w-16 h-16 rounded-full flex items-center justify-center overflow-hidden border-2 border-red">
                        <img src="https://heemsbd.com/assets/more/heeem.jpg" alt="HEEMS Logo" class="h-full w-full object-cover" />
                    </div>
                    <span class="text-2xl font-bungee text-white mt-2 block">HEEMS</span>
                </a>
                <button id="cart-btn" class="flex items-center px-4 py-2 border border-white text-white rounded-md hover:bg-white hover:text-black transition-all relative">
                    <i data-lucide="shopping-cart" class="w-5 h-5 mr-2"></i>
                    <span class="hidden sm:inline">Cart</span>
                    <span id="cart-count" class="cart-count">0</span>
                </button>
            </div>
            <nav class="hidden md:flex space-x-8 text-sm uppercase tracking-wider">
                <a href="landing.html" class="menu-item font-space uppercase tracking-wider text-fabric hover:text-aquamarine">Home</a>
                <a href="collections.html" class="menu-item font-space uppercase tracking-wider text-aquamarine font-bold">Our Products</a>
                <a href="story.html" class="menu-item font-space uppercase tracking-wider text-fabric hover:text-aquamarine">Our Story</a>
                <a href="contact.html" class="menu-item font-space uppercase tracking-wider text-fabric hover:text-aquamarine">Contact Us</a>
            </nav>
        </div>
        <div id="scrolled-nav" class="mybg-rounded hidden justify-between items-center px-6 opacity-0">
            <button id="mobile-menu-btn-scrolled" class="hamburger md:hidden">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <a href="landing.html" class="flex items-center space-x-2">
                <div class="w-14 h-14 rounded-full flex items-center justify-center relative overflow-hidden">
                    <img src="https://heemsbd.com/assets/more/heeem.jpg" alt="HEEMS Logo" class="h-25 w-10 object-contain main-logo transition-opacity duration-300 absolute inset-0 m-auto rounded-full" />
                    <img src="https://cdn.jsdelivr.net/gh/raiyanruhan/HeemsBD@main/Fun/3dgifmaker56642.gif" alt="Hover Image" class="h-10 w-10 object-contain absolute inset-0 hover-logo opacity-0 transition-opacity duration-300 m-auto" />
                </div>
                <span class="text-2xl font-bungee">HEEMS</span>
            </a>
            <nav class="hidden md:flex flex-1 justify-center space-x-8 text-sm uppercase tracking-wider">
                <a href="landing.html" class="menu-item font-space uppercase tracking-wider text-fabric hover:text-aquamarine">Home</a>
                <a href="collections.html" class="menu-item font-space uppercase tracking-wider text-aquamarine font-bold">Our Products</a>
                <a href="story.html" class="menu-item font-space uppercase tracking-wider text-fabric hover:text-aquamarine">Our Story</a>
                <a href="contact.html" class="menu-item font-space uppercase tracking-wider text-fabric hover:text-aquamarine">Contact Us</a>
            </nav>
            <div class="flex items-center">
                <button id="cart-btn-scrolled" class="flex items-center hover:text-[#00ffff] transition-all relative">
                    <i data-lucide="shopping-cart" class="w-6 h-6"></i>
                    <span id="cart-count-scrolled" class="cart-count">0</span>
                </button>
            </div>
        </div>
    </header>
    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay">
        <button id="mobile-close-btn" class="mobile-close-btn">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
        <div class="mobile-menu-content">
            <div class="mobile-nav-item" data-delay="0.1">
                <a href="landing.html">Home</a>
            </div>
            <div class="mobile-nav-item" data-delay="0.2">
                <a href="collections.html">Our Products</a>
            </div>
            <div class="mobile-nav-item" data-delay="0.3">
                <a href="story.html">Our Story</a>
            </div>
            <div class="mobile-nav-item" data-delay="0.4">
                <a href="contact.html">Contact Us</a>
            </div>
            <div class="mobile-nav-item" data-delay="0.5">
                <button id="mobile-cart-btn" class="flex items-center px-6 py-3 border-2 border-white text-white rounded-full hover:bg-white hover:text-black transition-all">
                    <i data-lucide="shopping-cart" class="w-6 h-6 mr-3"></i>
                    <span>View Cart</span>
                    <span id="mobile-cart-count" class="cart-count ml-3">0</span>
                </button>
            </div>
        </div>
    </div>
    <!-- Product Details Section -->
    <section class="pt-36 pb-20">
        <div class="container mx-auto px-6">
            <!-- Breadcrumbs -->
            <div class="mb-8">
                <nav class="flex" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-2">
                        <li class="inline-flex items-center">
                            <a href="landing.html" class="inline-flex items-center text-sm font-medium text-fabric/70 hover:text-aquamarine transition-colors">
                                <svg class="w-3 h-3 me-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
                                </svg>
                                Home
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <svg class="w-3 h-3 text-fabric/70 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                                </svg>
                                <a href="collections.html" class="ml-1 text-sm font-medium text-fabric/70 hover:text-aquamarine transition-colors md:ml-2">Products</a>
                            </div>
                        </li>
                        <li aria-current="page">
                            <div class="flex items-center">
                                <svg class="w-3 h-3 text-fabric/70 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                                </svg>
                                <span class="ml-1 text-sm font-medium text-fabric md:ml-2" id="breadcrumb-product-name">Product Details</span>
                            </div>
                        </li>
                    </ol>
                </nav>
            </div>
            <!-- Product Content -->
            <div class="flex flex-col lg:flex-row gap-12">
                <!-- Product Gallery -->
                <div class="w-full lg:w-1/2">
                    <div class="flex flex-col-reverse sm:flex-row gap-4">
                        <!-- Thumbnails -->
                        <div class="w-full sm:w-1/5 order-2 sm:order-1">
                            <div class="product-thumbnails flex flex-row sm:flex-col gap-2 overflow-x-auto sm:overflow-y-auto pb-2 sm:pb-0">
                                <!-- Thumbnails will be added here by JavaScript -->
                            </div>
                        </div>
                        <!-- Main Image -->
                        <div class="w-full sm:w-4/5 order-1 sm:order-2">
                            <div class="zoom-container relative rounded-xl shadow-lg overflow-hidden product-gallery vp-card">
                                <img id="main-product-image" src="" alt="Product Image" class="w-full h-full object-contain cursor-zoom-in">
                                <div id="zoom-result" class="zoom-result"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Product Info -->
                <div class="w-full lg:w-1/2">
                    <div class="rounded-xl shadow-lg p-8 vp-card">
                        <!-- Product Title -->
                        <h1 class="text-3xl md:text-4xl font-bold text-fabric mb-2" id="product-title">Loading...</h1>
                        
                        <!-- Product Category -->
                        <div class="flex items-center mb-4">
                            <span class="font-space uppercase tracking-wider text-xs bg-aquamarine text-darkbg px-2 py-1 rounded" id="product-category">LOADING</span>
                            <span class="ml-2 text-sm text-fabric/70" id="product-availability"></span>
                        </div>
                        
                        <!-- Product Price -->
                        <div class="mb-6">
                            <span class="text-3xl font-bold text-mauveine" id="product-price">৳0.00</span>
                        </div>
                        
                        <!-- Stock Indicator -->
                        <div class="mb-4 hidden" id="stock-indicator-container">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-sm text-fabric/70">Available: <span id="stock-count">0</span>/<span id="max-quantity">0</span></span>
                                <span class="text-xs font-medium" id="stock-status"></span>
                            </div>
                            <div class="stock-indicator">
                                <div class="stock-progress" id="stock-progress"></div>
                            </div>
                        </div>
                        
                        <!-- Product Description -->
                        <div class="mb-8">
                            <p class="text-fabric/80" id="product-description">Loading product description...</p>
                        </div>
                        
                        <!-- Size Selector -->
                        <div class="mb-6">
                            <h3 class="text-sm font-space uppercase tracking-wider text-fabric mb-3">Size</h3>
                            <div class="flex flex-wrap gap-2" id="size-options-container">
                                <!-- Size options will be added here by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Color Selector -->
                        <div class="mb-8">
                            <h3 class="text-sm font-space uppercase tracking-wider text-fabric mb-3">Color</h3>
                            <div class="flex flex-wrap gap-3" id="color-options-container">
                                <!-- Color options will be added here by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Quantity Selector -->
                        <div class="mb-8">
                            <h3 class="text-sm font-space uppercase tracking-wider text-fabric mb-3">Quantity</h3>
                            <div class="quantity-selector flex items-center">
                              <!-- Decrease Button with custom down arrow -->
                              <button class="w-10 h-10 flex items-center justify-center border border-fabric/30 text-fabric hover:bg-bistre rounded-l-lg transition-colors" id="decrease-qty" aria-label="Decrease quantity">
                                <!-- Unicode Down Arrow -->
                                &#x25BC; 
                                <!-- Or use SVG for more styling control -->
                                <!--
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                                -->
                              </button>
                              <!-- Input field -->
                              <input type="number" min="1" value="1" class="w-16 h-10 text-center border-t border-b border-fabric/30 bg-transparent text-fabric" id="product-qty">
                              <!-- Increase Button with custom up arrow -->
                              <button class="w-10 h-10 flex items-center justify-center border border-fabric/30 text-fabric hover:bg-bistre rounded-r-lg transition-colors" id="increase-qty" aria-label="Increase quantity">
                                <!-- Unicode Up Arrow -->
                                &#x25B2; 
                                <!-- Or use SVG -->
                                <!--
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                                </svg>
                                -->
                              </button>
                            </div>
                            <p class="text-xs text-fabric/50 mt-1" id="max-quantity-message"></p>
                          </div>
                          <style>
                            /* Remove default arrows in number input */
                            #product-qty::-webkit-inner-spin-button,
                            #product-qty::-webkit-outer-spin-button {
                              -webkit-appearance: none;
                              margin: 0;
                            }
                          </style>
                        
                        <!-- Add to Cart Button -->
                        <button class="w-full py-4 bg-bistre text-fabric font-space uppercase tracking-wider text-sm hover:bg-brownsugar transition mb-4 flex items-center justify-center" id="add-to-cart-btn">
                            <span>Add to Cart</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </button>
                        
                        <!-- Wishlist Button -->
                        <button class="w-full py-3 border border-fabric text-fabric font-space uppercase tracking-wider text-sm hover:bg-fabric/10 transition flex items-center justify-center">
                            <span>Purchase Now</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Related Products Section -->
    <section class="pb-24">
        <div class="container mx-auto px-6">
            <h2 class="text-2xl md:text-3xl font-bold text-fabric mb-8">You May Also Like</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="related-products">
                <!-- Related products will be loaded here -->
            </div>
        </div>
    </section>
    <!-- Shopping Cart Sidebar -->
    <div class="fixed inset-y-0 right-0 w-full sm:w-96 bg-darkbg border-l border-fabric/20 z-50 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out"
        id="cart-sidebar">
        <div class="h-full flex flex-col">
            <div class="p-6 border-b border-fabric/20 flex justify-between items-center">
                <h3 class="text-xl font-bold text-fabric">Your Cart</h3>
                <button class="text-fabric hover:text-aquamarine transition-colors" id="close-cart">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6" id="cart-items">
                <!-- Cart items will be added here dynamically -->
                <div class="text-center py-12 text-fabric/70">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-4 text-fabric/30" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                            d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <p>Your cart is empty</p>
                </div>
            </div>
            <div class="p-6 border-t border-fabric/20">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-fabric">Subtotal</span>
                    <span class="font-bold text-fabric" id="cart-subtotal">৳0.00</span>
                </div>
                <p class="text-sm text-fabric/70 mb-6">Shipping and taxes calculated at checkout</p>
                <a href="/cart">
                    <button
                        class="w-full px-6 py-3 bg-bistre text-fabric font-space uppercase tracking-wider text-sm hover:bg-brownsugar transition">
                        Checkout
                    </button>
                </a>
                <div class="text-center mt-4">
                    <a href="collections.html" class="text-sm text-fabric/70 hover:text-aquamarine transition-colors">Continue
                        Shopping</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer id="contact" class="bg-gradient-to-r from-gray-800 via-gray-900 to-black text-fabric/70 py-12 relative overflow-hidden" style="background: linear-gradient(135deg, #4b1f1f, #1a1a1a); border-top: 2px solid #fcd34d; box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.2);">
        <div class="container mx-auto px-6 relative z-10 flex flex-col md:flex-row justify-between items-center text-center md:text-left">
            <!-- Left Section -->
            <div class="mb-6 md:mb-0 flex-1">
                <h2 class="text-3xl font-bungee mb-4" style="letter-spacing: 2px;">HEEMS</h2>
                <p class="text-sm max-w-xs mb-4" style="font-family: 'Courier New', monospace;">Experimental fashion house from Galachipa, Bangladesh. Redefining South Asian aesthetics.</p>
                <!-- Social icons -->
                <div class="flex justify-center md:justify-start space-x-6 mb-4">
                    <a href="#" class="hover:text-aquamarine transition duration-300">
                        <!-- Facebook Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22.675 0H1.325C.593 0 0 .593 0 1.325v21.35C0 23.407.593 24 1.325 24h21.35C23.407 24 24 23.407 24 22.675V1.325C24 .593 23.407 0 22.675 0zM8.06 15.845H3.937V9.296h4.125V15.845zm.84-6.99h-.002c-1.158 0-1.85-.656-1.85-1.678V6.08c0-1.022.692-1.678 1.85-1.678h.002c1.17 0 1.86.656 1.86 1.678v1.097c0 1.022-.69 1.678-1.86 1.678zM18.188 15.845h-3.197v-3.469h.038c.877 0 1.343-.54 1.343-1.177 0-.638-.467-1.177-1.343-1.177h-.037V8.93h3.126c2.756 0 4.196 1.588 4.196 3.954v.001c0 2.367-1.44 3.96-4.196 3.96z" />
                        </svg>
                    </a>
                    <a href="#" class="hover:text-aquamarine transition duration-300">
                        <!-- Twitter Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557a9.83 9.83 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724 9.861 9.861 0 0 1-3.127 1.195 4.92 4.92 0 0 0-8.384 4.482A13.978 13.978 0 0 1 1.671 3.149 4.916 4.916 0 0 0 3.195 9.722 4.903 4.903 0 0 1 .964 9.1v.062a4.92 4.92 0 0 0 3.941 4.827 4.996 4.996 0 0 1-2.212.084 4.927 4.927 0 0 0 4.6 3.417A9.868 9.868 0 0 1 0 19.540a13.940 13.940 0 0 0 7.548 2.209c9.057 0 14-7.514 14-14 0-.213-.005-.425-.014-.637A10.025 10.025 0 0 0 24 4.557z"/>
                        </svg>
                    </a>
                    <a href="#" class="hover:text-aquamarine transition duration-300">
                        <!-- LinkedIn Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-10h3v10zm-1.5-11.268c-.966 0-1.75-.784-1.75-1.75s.784-1.75 1.75-1.75 1.75.784 1.75 1.75-.784 1.75-1.75 1.75zm13.5 11.268h-3v-5.5c0-1.379-1.121-2.5-2.5-2.5s-2.5 1.121-2.5 2.5v5.5h-3v-10h3v1.293c.385-.296.842-.493 1.371-.493 1.519 0 2.75 1.231 2.75 2.75v6.45z"/>
                        </svg>
                    </a>
                </div>
                <p class="text-sm" style="font-family: 'Courier New', monospace;">contact@heemsclothing.com</p>
            </div>
                <!-- Right Section -->
                <div class="flex-1 mt-8 md:mt-0 text-center md:text-right">
                    <p class="text-sm" style="font-family: 'Courier New', monospace;">&copy; <span id="current-year"></span> Heems Clothing. All rights reserved. </p>
                    <script>
                        document.getElementById('current-year').textContent = new Date().getFullYear();
                    </script>
                </div>
        </div>
        <!-- Glossy Overlay for Glossy Finish -->
        <div class="absolute inset-0" style="background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0)); mix-blend-mode: overlay; border-top: 2px solid #fcd34d; pointer-events: none;"></div>
    </footer>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger);
        if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            const centerLogo = document.getElementById("logo-container");
            const scrolledNav = document.getElementById("scrolled-nav");
            ScrollTrigger.create({
                trigger: "body",
                start: "top top",
                end: "+=150",
                scrub: true,
                onEnter: () => {
                    gsap.to(centerLogo, {
                        opacity: 0,
                        y: -50,
                        duration: 0.4,
                        onComplete: () => {
                            centerLogo.style.display = "none";
                            scrolledNav.classList.remove("hidden");
                            scrolledNav.classList.add("flex");
                            gsap.to(scrolledNav, { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" });
                        }
                    });
                },
                onLeaveBack: () => {
                    gsap.to(scrolledNav, {
                        opacity: 0,
                        duration: 0.3,
                        onComplete: () => {
                            scrolledNav.classList.add("hidden");
                            scrolledNav.classList.remove("flex");
                            centerLogo.style.display = "flex";
                            gsap.to(centerLogo, { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" });
                        }
                    });
                }
            });
            const mainLogo = document.querySelector('.main-logo');
            const hoverLogo = document.querySelector('.hover-logo');
            if (mainLogo && hoverLogo) {
                mainLogo.addEventListener('mouseenter', () => {
                    mainLogo.style.opacity = '0';
                    hoverLogo.style.opacity = '1';
                });
                hoverLogo.addEventListener('mouseenter', () => {
                    mainLogo.style.opacity = '0';
                    hoverLogo.style.opacity = '1';
                });
                hoverLogo.addEventListener('mouseleave', () => {
                    mainLogo.style.opacity = '1';
                    hoverLogo.style.opacity = '0';
                });
            }
            lucide.createIcons();
        }
        document.addEventListener('DOMContentLoaded', function () {
            // Cart functionality
            let cart = loadCart();
            // DOM Elements
            const cartBtn = document.getElementById('cart-btn');
            const cartBtnScrolled = document.getElementById('cart-btn-scrolled');
            const mobileCartBtn = document.getElementById('mobile-cart-btn');
            const cartSidebar = document.getElementById('cart-sidebar');
            const closeCartButton = document.getElementById('close-cart');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartSubtotal = document.getElementById('cart-subtotal');
            const cartCountElements = document.querySelectorAll('#cart-count, #cart-count-scrolled, #mobile-cart-count');
            const progressBar = document.getElementById('progress-bar');
            const loadingOverlay = document.getElementById('loaderOverlay');
            // Initialize cart UI
            updateCartUI();
            // Get product ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            // Load product details
            if (productId) {
                loadProductDetails(productId);
            } else {
                // Handle case where no product ID is provided
                document.getElementById('product-title').textContent = 'Product Not Found';
                document.getElementById('product-description').textContent = 'The requested product could not be found. Please return to our collections page.';
                document.getElementById('add-to-cart-btn').disabled = true;
                hideLoadingOverlay();
            }
            // Cart sidebar toggle
            if (cartBtn) {
                cartBtn.addEventListener('click', toggleCart);
            }
            if (cartBtnScrolled) {
                cartBtnScrolled.addEventListener('click', toggleCart);
            }
            if (mobileCartBtn) {
                mobileCartBtn.addEventListener('click', function () {
                    const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
                    if (mobileMenuOverlay.classList.contains('active')) {
                        toggleMobileMenu();
                    }
                    toggleCart();
                });
            }
            if (closeCartButton) {
                closeCartButton.addEventListener('click', toggleCart);
            }
            // Close cart when clicking outside
            document.addEventListener('click', function (event) {
                if (!cartSidebar.contains(event.target) &&
                    !cartBtn.contains(event.target) &&
                    !cartBtnScrolled.contains(event.target) &&
                    !mobileCartBtn.contains(event.target) &&
                    !event.target.closest('#cart-sidebar') &&
                    !event.target.closest('#cart-btn') &&
                    !event.target.closest('#cart-btn-scrolled') &&
                    !event.target.closest('#mobile-cart-btn')) {
                    cartSidebar.classList.add('translate-x-full');
                    document.body.style.overflow = '';
                }
            });
            // Mobile menu functionality
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenuBtnScrolled = document.getElementById('mobile-menu-btn-scrolled');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
            const mobileCloseBtn = document.getElementById('mobile-close-btn');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            }
            if (mobileMenuBtnScrolled) {
                mobileMenuBtnScrolled.addEventListener('click', toggleMobileMenu);
            }
            function toggleMobileMenu() {
                const isActive = mobileMenuOverlay.classList.contains('active');
                if (isActive) {
                    closeMobileMenu();
                } else {
                    openMobileMenu();
                }
            }
            if (mobileCloseBtn) {
                mobileCloseBtn.addEventListener('click', closeMobileMenu);
            }
            mobileNavItems.forEach(item => {
                const link = item.querySelector('a');
                if (link) {
                    link.addEventListener('click', closeMobileMenu);
                }
            });
            mobileMenuOverlay.addEventListener('click', function (e) {
                if (e.target === mobileMenuOverlay) {
                    closeMobileMenu();
                }
            });
            function openMobileMenu() {
                mobileMenuOverlay.classList.add('active');
                if (mobileMenuBtn) mobileMenuBtn.classList.add('active');
                if (mobileMenuBtnScrolled) mobileMenuBtnScrolled.classList.add('active');
                document.body.style.overflow = 'hidden';
                mobileNavItems.forEach((item, index) => {
                    const delay = parseFloat(item.getAttribute('data-delay')) || 0;
                    setTimeout(() => {
                        item.classList.add('active');
                    }, delay * 1000);
                });
            }
            function closeMobileMenu() {
                mobileMenuOverlay.classList.remove('active');
                if (mobileMenuBtn) mobileMenuBtn.classList.remove('active');
                if (mobileMenuBtnScrolled) mobileMenuBtnScrolled.classList.remove('active');
                document.body.style.overflow = '';
                mobileNavItems.forEach(item => {
                    item.classList.remove('active');
                });
            }
            let touchStartY = 0;
            let touchEndY = 0;
            mobileMenuOverlay.addEventListener('touchstart', function (e) {
                touchStartY = e.changedTouches[0].screenY;
            });
            mobileMenuOverlay.addEventListener('touchend', function (e) {
                touchEndY = e.changedTouches[0].screenY;
                handleSwipe();
            });
            function handleSwipe() {
                const swipeThreshold = 50;
                const swipeDistance = touchEndY - touchStartY;
                if (swipeDistance > swipeThreshold) {
                    closeMobileMenu();
                }
            }
            // Size selector
            const sizeOptionsContainer = document.getElementById('size-options-container');
            
            // Color selector
            const colorOptionsContainer = document.getElementById('color-options-container');
            
            // Quantity selector
            const decreaseQty = document.getElementById('decrease-qty');
            const increaseQty = document.getElementById('increase-qty');
            const productQty = document.getElementById('product-qty');
            const maxQuantityMessage = document.getElementById('max-quantity-message');
            
            decreaseQty.addEventListener('click', function () {
                let currentValue = parseInt(productQty.value);
                if (currentValue > 1) {
                    productQty.value = currentValue - 1;
                }
            });
            
            increaseQty.addEventListener('click', function () {
                let currentValue = parseInt(productQty.value);
                const maxQuantity = parseInt(productQty.max);
                
                if (currentValue < maxQuantity) {
                    productQty.value = currentValue + 1;
                }
            });
            
            // Add to cart button
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            if (addToCartBtn) {
                addToCartBtn.addEventListener('click', function () {
                    const productId = this.getAttribute('data-product-id');
                    const productName = document.getElementById('product-title').textContent;
                    const productPrice = parseFloat(document.getElementById('product-price').textContent.replace('৳', ''));
                    const productImage = document.getElementById('main-product-image').src;
                    
                    // Get selected size and color
                    const selectedSizeElement = document.querySelector('.size-option.selected');
                    const selectedColorElement = document.querySelector('.color-option.selected');
                    
                    if (!selectedSizeElement || !selectedColorElement) {
                        showNotification('Please select size and color');
                        return;
                    }
                    
                    const selectedSize = selectedSizeElement.getAttribute('data-size');
                    const selectedColor = selectedColorElement.getAttribute('data-color');
                    const quantity = parseInt(document.getElementById('product-qty').value);
                    
                    // Show loading state
                    const originalContent = this.innerHTML;
                    this.innerHTML = `
                        <svg aria-hidden="true" role="status" class="inline w-4 h-4 me-2 text-gray-200 animate-spin" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
                            <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="#1C64F2"/>
                        </svg>
                        Adding...
                    `;
                    this.disabled = true;
                    
                    // Simulate delay for UX
                    setTimeout(() => {
                        addToCart({
                            id: productId,
                            name: productName,
                            price: productPrice,
                            quantity: quantity,
                            size: selectedSize,
                            color: selectedColor,
                            image: productImage
                        });
                        
                        // Restore button
                        this.innerHTML = originalContent;
                        this.disabled = false;
                        showNotification(`${productName} added to cart`);
                    }, 1000);
                });
            }
            
            // Image zoom functionality
            const mainImage = document.getElementById('main-product-image');
            const zoomResult = document.getElementById('zoom-result');
            if (mainImage && zoomResult) {
                mainImage.addEventListener('mousemove', function(e) {
                    zoomResult.style.display = 'block';
                    
                    // Calculate the position of the cursor relative to the image
                    const posX = e.offsetX;
                    const posY = e.offsetY;
                    
                    // Calculate the percentage position
                    const percentX = (posX / this.offsetWidth) * 100;
                    const percentY = (posY / this.offsetHeight) * 100;
                    
                    // Set the background position of the zoom result
                    zoomResult.style.backgroundPosition = `${percentX}% ${percentY}%`;
                    
                    // Set the background image
                    zoomResult.style.backgroundImage = `url('${this.src}')`;
                });
                
                mainImage.addEventListener('mouseleave', function() {
                    zoomResult.style.display = 'none';
                });
            }
            
            // Functions
            function loadCart() {
                const savedCart = localStorage.getItem('heems-cart');
                return savedCart ? JSON.parse(savedCart) : [];
            }
            
            function saveCart() {
                localStorage.setItem('heems-cart', JSON.stringify(cart));
            }
            
            function addToCart(item) {
                // Check if product already in cart with same size and color
                const existingItemIndex = cart.findIndex(cartItem =>
                    cartItem.id === item.id &&
                    cartItem.size === item.size &&
                    cartItem.color === item.color
                );
                
                if (existingItemIndex !== -1) {
                    // Update quantity if item already exists
                    cart[existingItemIndex].quantity += item.quantity;
                } else {
                    // Add new item to cart
                    cart.push(item);
                }
                
                saveCart();
                updateCartUI();
            }
            
            function updateItemQuantity(itemId, action) {
                const itemIndex = cart.findIndex(item => item.id === itemId);
                if (itemIndex !== -1) {
                    if (action === 'increase') {
                        cart[itemIndex].quantity += 1;
                    } else if (action === 'decrease') {
                        if (cart[itemIndex].quantity > 1) {
                            cart[itemIndex].quantity -= 1;
                        } else {
                            // Remove item if quantity becomes 0
                            cart.splice(itemIndex, 1);
                        }
                    }
                    saveCart();
                    updateCartUI();
                }
            }
            
            function removeFromCart(itemId) {
                cart = cart.filter(item => item.id !== itemId);
                saveCart();
                updateCartUI();
            }
            
            function updateCartUI() {
                // Update cart count
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                cartCountElements.forEach(el => el.textContent = totalItems);
                
                // Update cart sidebar if it exists on the page
                if (!cartItemsContainer || !cartSubtotal) {
                    return; // Not on a page with cart sidebar
                }
                
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = `
                        <div class="text-center py-12 text-fabric/70">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-4 text-fabric/30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                            <p>Your cart is empty</p>
                        </div>
                    `;
                    cartSubtotal.textContent = '৳0.00';
                    return;
                }
                
                let itemsHTML = '';
                let subtotal = 0;
                
                cart.forEach(item => {
                    subtotal += item.price * item.quantity;
                    itemsHTML += `
                        <div class="flex py-4 border-b border-fabric/20">
                            <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden">
                                <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1 pl-4">
                                <h4 class="font-bold text-fabric">${item.name}</h4>
                                <p class="text-sm text-fabric/70 mb-1">${item.color}, ${item.size}</p>
                                <p class="text-sm text-fabric/70">৳${item.price} × ${item.quantity}</p>
                            </div>
                            <div class="flex flex-col items-end space-y-2">
                                <p class="font-bold text-fabric">৳${(item.price * item.quantity).toFixed(2)}</p>
                                <div class="flex items-center space-x-2">
                                    <button class="quantity-btn text-fabric hover:text-mauveine transition text-lg font-bold w-6 h-6 flex items-center justify-center rounded-full border border-fabric/30 hover:border-fabric" data-id="${item.id}" data-action="decrease">-</button>
                                    <span class="text-sm text-fabric font-medium min-w-[20px] text-center">${item.quantity}</span>
                                    <button class="quantity-btn text-fabric hover:text-mauveine transition text-lg font-bold w-6 h-6 flex items-center justify-center rounded-full border border-fabric/30 hover:border-fabric" data-id="${item.id}" data-action="increase">+</button>
                                </div>
                                <button class="text-xs text-fabric/50 hover:text-mauveine transition remove-item" data-id="${item.id}">
                                    Remove
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                cartItemsContainer.innerHTML = itemsHTML;
                cartSubtotal.textContent = `৳${subtotal.toFixed(2)}`;
                
                // Add event listeners to remove buttons and quantity buttons
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function (e) {
                        e.stopPropagation(); // Prevent event bubbling
                        const itemId = this.getAttribute('data-id');
                        removeFromCart(itemId);
                    });
                });
                
                // Add event listeners to quantity buttons
                document.querySelectorAll('.quantity-btn').forEach(button => {
                    button.addEventListener('click', function (e) {
                        e.stopPropagation(); // Prevent event bubbling
                        const itemId = this.getAttribute('data-id');
                        const action = this.getAttribute('data-action');
                        updateItemQuantity(itemId, action);
                    });
                });
            }
            
            function toggleCart() {
                cartSidebar.classList.toggle('translate-x-full');
                document.body.style.overflow = cartSidebar.classList.contains('translate-x-full') ? '' : 'hidden';
            }
            
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'fixed bottom-4 right-4 bg-bistre text-fabric px-4 py-2 rounded-lg shadow-lg animate-fade-in z-50';
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.add('opacity-0', 'transition-opacity', 'duration-300');
                    setTimeout(() => notification.remove(), 300);
                }, 2000);
            }
            
            function loadProductDetails(productId) {
                // Start progress bar
                updateProgress(10);
                
                fetch('https://console.heemsbd.com/api/products')
                    .then(response => {
                        updateProgress(30);
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(products => {
                        updateProgress(60);
                        const product = products.find(p => p.id === productId);
                        
                        if (product) {
                            // Update product details
                            document.getElementById('product-title').textContent = product.name;
                            document.getElementById('breadcrumb-product-name').textContent = product.name;
                            document.getElementById('product-price').textContent = `৳${product.price}.00`;
                            document.getElementById('product-description').textContent = product.descriptionLarger || product.description;
                            
                            // Set category badge
                            const categoryBadge = document.getElementById('product-category');
                            if (product.category.includes('new')) {
                                categoryBadge.textContent = 'NEW';
                                categoryBadge.classList.add('bg-aquamarine', 'text-darkbg');
                            } else if (product.category.includes('limited')) {
                                categoryBadge.textContent = 'LIMITED';
                                categoryBadge.classList.add('bg-mauveine', 'text-white');
                            } else {
                                categoryBadge.textContent = product.category.toUpperCase();
                                categoryBadge.classList.add('bg-bistre', 'text-fabric');
                            }
                            
                            // Set availability
                            const availability = document.getElementById('product-availability');
                            if (product.available) {
                                availability.textContent = 'In Stock';
                                availability.classList.add('text-aquamarine');
                            } else {
                                availability.textContent = 'Out of Stock';
                                availability.classList.add('text-mauveine');
                                document.getElementById('add-to-cart-btn').disabled = true;
                            }
                            
                            // Set stock indicator if maxQuantity is available
                            const stockIndicator = document.getElementById('stock-indicator-container');
                            const stockCount = document.getElementById('stock-count');
                            const maxQuantity = document.getElementById('max-quantity');
                            const stockProgress = document.getElementById('stock-progress');
                            const stockStatus = document.getElementById('stock-status');
                            
                            if (product.maxQuantity) {
                                stockIndicator.classList.remove('hidden');
                                stockCount.textContent = product.maxQuantity;
                                maxQuantity.textContent = product.maxQuantity;
                                
                                // Calculate stock percentage
                                const percentage = 100; // Assuming all items are available
                                stockProgress.style.width = `${percentage}%`;
                                
                                // Set stock status text
                                if (percentage > 75) {
                                    stockStatus.textContent = 'High in stock';
                                    stockStatus.classList.add('text-aquamarine');
                                } else if (percentage > 25) {
                                    stockStatus.textContent = 'Low in stock';
                                    stockStatus.classList.add('text-yellowish');
                                } else {
                                    stockStatus.textContent = 'Very low in stock';
                                    stockStatus.classList.add('text-mauveine');
                                }
                            } else {
                                stockIndicator.classList.add('hidden');
                            }
                            
                            // Set main image
                            const mainImage = document.getElementById('main-product-image');
                            mainImage.src = product.image;
                            mainImage.alt = product.name;
                            
                            // Set thumbnails
                            const thumbnailsContainer = document.querySelector('.product-thumbnails');
                            thumbnailsContainer.innerHTML = '';
                            
                            // Add all available images as thumbnails
                            let imageCount = 1;
                            while (product[`image${imageCount}`] || (imageCount === 1 && product.image)) {
                                const imgSrc = product[`image${imageCount}`] || product.image;
                                const thumbnail = document.createElement('div');
                                thumbnail.className = `thumbnail ${imageCount === 1 ? 'active' : ''}`;
                                thumbnail.innerHTML = `<img src="${imgSrc}" alt="${product.name} thumbnail ${imageCount}" class="w-full h-full object-cover">`;
                                
                                // Add click event to change main image
                                thumbnail.addEventListener('click', function() {
                                    mainImage.src = imgSrc;
                                    document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                                    this.classList.add('active');
                                });
                                
                                thumbnailsContainer.appendChild(thumbnail);
                                imageCount++;
                            }
                            
                            // Set up size options
                            sizeOptionsContainer.innerHTML = '';
                            if (product.availableSizes && product.availableSizes.length > 0) {
                                product.availableSizes.forEach((size, index) => {
                                    const sizeOption = document.createElement('button');
                                    sizeOption.className = `size-option px-4 py-2 border border-fabric/30 rounded-full text-sm text-fabric hover:bg-bistre transition-colors ${index === 0 ? 'selected' : ''}`;
                                    sizeOption.setAttribute('data-size', size);
                                    sizeOption.textContent = size;
                                    
                                    sizeOption.addEventListener('click', function () {
                                        document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
                                        this.classList.add('selected');
                                    });
                                    
                                    sizeOptionsContainer.appendChild(sizeOption);
                                });
                            } else {
                                // Default sizes if none specified
                                const defaultSizes = ['XS', 'S', 'M', 'L', 'XL'];
                                defaultSizes.forEach((size, index) => {
                                    const sizeOption = document.createElement('button');
                                    sizeOption.className = `size-option px-4 py-2 border border-fabric/30 rounded-full text-sm text-fabric hover:bg-bistre transition-colors ${index === 2 ? 'selected' : ''}`;
                                    sizeOption.setAttribute('data-size', size);
                                    sizeOption.textContent = size;
                                    
                                    sizeOption.addEventListener('click', function () {
                                        document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
                                        this.classList.add('selected');
                                    });
                                    
                                    sizeOptionsContainer.appendChild(sizeOption);
                                });
                            }
                            
                            // Set up color options
                            colorOptionsContainer.innerHTML = '';
                            if (product.availableColors && product.availableColors.length > 0) {
                                product.availableColors.forEach((color, index) => {
                                    const colorOption = document.createElement('button');
                                    colorOption.className = `color-option w-8 h-8 rounded-full ${index === 0 ? 'selected' : ''}`;
                                    colorOption.setAttribute('data-color', color);
                                    colorOption.setAttribute('title', color);
                                    
                                    // Set color based on color name
                                    if (color.toLowerCase() === 'red') {
                                        colorOption.classList.add('bg-red-500');
                                    } else if (color.toLowerCase() === 'blue') {
                                        colorOption.classList.add('bg-blue-500');
                                    } else if (color.toLowerCase() === 'green') {
                                        colorOption.classList.add('bg-green-500');
                                    } else if (color.toLowerCase() === 'black') {
                                        colorOption.classList.add('bg-black');
                                    } else if (color.toLowerCase() === 'white') {
                                        colorOption.classList.add('bg-white', 'border', 'border-fabric/30');
                                    } else {
                                        // Default to a gray color if not specified
                                        colorOption.classList.add('bg-gray-300');
                                    }
                                    
                                    colorOption.addEventListener('click', function () {
                                        document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                                        this.classList.add('selected');
                                    });
                                    
                                    colorOptionsContainer.appendChild(colorOption);
                                });
                            } else {
                                // Default colors if none specified
                                const defaultColors = ['Red', 'Blue', 'Green', 'Black', 'White'];
                                defaultColors.forEach((color, index) => {
                                    const colorOption = document.createElement('button');
                                    colorOption.className = `color-option w-8 h-8 rounded-full ${index === 0 ? 'selected' : ''}`;
                                    colorOption.setAttribute('data-color', color);
                                    colorOption.setAttribute('title', color);
                                    
                                    if (color === 'Red') {
                                        colorOption.classList.add('bg-red-500');
                                    } else if (color === 'Blue') {
                                        colorOption.classList.add('bg-blue-500');
                                    } else if (color === 'Green') {
                                        colorOption.classList.add('bg-green-500');
                                    } else if (color === 'Black') {
                                        colorOption.classList.add('bg-black');
                                    } else if (color === 'White') {
                                        colorOption.classList.add('bg-white', 'border', 'border-fabric/30');
                                    }
                                    
                                    colorOption.addEventListener('click', function () {
                                        document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                                        this.classList.add('selected');
                                    });
                                    
                                    colorOptionsContainer.appendChild(colorOption);
                                });
                            }
                            
                            // Set quantity limits
                            const quantityInput = document.getElementById('product-qty');
                            if (product.maxQuantity) {
                                quantityInput.max = product.maxQuantity;
                                maxQuantityMessage.textContent = `Maximum ${product.maxQuantity} per customer`;
                            } else {
                                quantityInput.removeAttribute('max');
                                maxQuantityMessage.textContent = '';
                            }
                            
                            // Set add to cart button data
                            document.getElementById('add-to-cart-btn').setAttribute('data-product-id', product.id);
                            
                            // Load related products
                            loadRelatedProducts(product.category, product.id);
                            
                            updateProgress(90);
                        } else {
                            // Product not found
                            document.getElementById('product-title').textContent = 'Product Not Found';
                            document.getElementById('product-description').textContent = 'The requested product could not be found. Please return to our collections page.';
                            document.getElementById('add-to-cart-btn').disabled = true;
                        }
                        
                        updateProgress(100);
                        setTimeout(hideLoadingOverlay, 500);
                    })
                    .catch(error => {
                        console.error('Error loading product details:', error);
                        document.getElementById('product-title').textContent = 'Error Loading Product';
                        document.getElementById('product-description').textContent = 'There was an error loading the product details. Please try again later.';
                        document.getElementById('add-to-cart-btn').disabled = true;
                        updateProgress(100);
                        setTimeout(hideLoadingOverlay, 500);
                    });
            }
            
            async function loadRelatedProducts(category, currentProductId) {
                try {
                    const response = await fetch('https://console.heemsbd.com/api/products');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const products = await response.json();
                    
                    if (!products || !Array.isArray(products)) {
                        throw new Error('Invalid products data received');
                    }
                    
                    // Filter products by same category (excluding current product)
                    const relatedProducts = products.filter(p => 
                        p.id !== currentProductId && 
                        p.category.includes(category.split(' ')[0]) // Match first category word
                    ).slice(0, 3); // Get up to 3 related products
                    
                    const relatedContainer = document.getElementById('related-products');
                    
                    if (relatedProducts.length > 0) {
                        relatedProducts.forEach(product => {
                            const card = createProductCard(product);
                            relatedContainer.appendChild(card);
                        });
                        
                        // Add event listeners to "Add to Cart" buttons in related products
                        document.querySelectorAll('.related-add-to-cart').forEach(button => {
                            button.addEventListener('click', function() {
                                const productId = this.getAttribute('data-product-id');
                                const productName = this.getAttribute('data-product-name');
                                const productPrice = parseFloat(this.getAttribute('data-product-price'));
                                const productImage = this.closest('.collection-card').querySelector('.collection-image').src;
                                
                                // Show loading state
                                const originalContent = this.innerHTML;
                                this.innerHTML = `
                                    <svg aria-hidden="true" role="status" class="inline w-4 h-4 me-2 text-gray-200 animate-spin" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
                                        <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="#1C64F2"/>
                                    </svg>
                                    Adding...
                                `;
                                this.disabled = true;
                                
                                // Add to cart after delay
                                setTimeout(() => {
                                    addToCart({
                                        id: productId,
                                        name: productName,
                                        price: productPrice,
                                        quantity: 1,
                                        size: 'M',
                                        color: 'Default',
                                        image: productImage
                                    });
                                    
                                    // Restore button
                                    this.innerHTML = originalContent;
                                    this.disabled = false;
                                    showNotification(`${productName} added to cart`);
                                }, 1000);
                            });
                        });
                    } else {
                        relatedContainer.innerHTML = '<p class="text-fabric/70">You might find these interesting, but currently, there are no related products available.</p>';
                    }
                } catch (error) {
                    console.error('Error loading related products:', error);
                    
                    // Fallback: try direct JSON access
                    try {
                        const fallbackResponse = await fetch('https://console.heemsbd.com/api/dress.json');
                        if (fallbackResponse.ok) {
                            const fallbackProducts = await fallbackResponse.json();
                            if (fallbackProducts && Array.isArray(fallbackProducts)) {
                                // Retry with fallback data
                                const relatedProducts = fallbackProducts.filter(p => 
                                    p.id !== currentProductId && 
                                    p.category.includes(category.split(' ')[0])
                                ).slice(0, 3);
                                
                                const relatedContainer = document.getElementById('related-products');
                                if (relatedProducts.length > 0) {
                                    relatedProducts.forEach(product => {
                                        const card = createProductCard(product);
                                        relatedContainer.appendChild(card);
                                    });
                                } else {
                                    relatedContainer.innerHTML = '<p class="text-fabric/70">No related products available.</p>';
                                }
                                return;
                            }
                        }
                    } catch (fallbackError) {
                        console.error('Fallback fetch also failed:', fallbackError);
                    }
                    
                    document.getElementById('related-products').innerHTML = '<p class="text-fabric/70">Error loading related products. Please try again later.</p>';
                }
            }
            
            function createProductCard(product) {
                const card = document.createElement('div');
                card.className = 'collection-card rounded-xl overflow-hidden bg-darkbg shadow-lg';
                card.innerHTML = `
                    <div class="relative aspect-square overflow-hidden">
                        <img
                            src="${product.image}"
                            alt="${product.name}"
                            class="w-full h-full object-cover collection-image"
                        >
                        <div class="absolute inset-0 collection-overlay flex flex-col justify-end p-6">
                            <h3 class="text-2xl font-bold text-fabric mb-2 collection-title">${product.name}</h3>
                            <p class="text-fabric/80 mb-4">${product.description}</p>
                            <a href="product.html?id=${product.id}" class="text-fabric font-space uppercase tracking-wider text-sm hover:text-aquamarine transition-colors">View Details</a>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-xl font-bold text-fabric mb-1">${product.name}</h3>
                                <p class="text-fabric/70 text-sm">${product.category.includes('new') ? 'Spring 2024 Collection' : product.category.includes('limited') ? 'Limited Edition' : 'Classic Collection'}</p>
                            </div>
                            <span class="font-space uppercase tracking-wider text-xs ${product.category.includes('new') ? 'text-aquamarine' : product.category.includes('limited') ? 'text-mauveine' : 'text-yellowish'}">${product.category.includes('new') ? 'NEW' : product.category.includes('limited') ? 'LIMITED' : product.category.includes('bestseller') ? 'BESTSELLER' : ''}</span>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                            <span class="text-lg font-bold text-fabric">৳${product.price}.00</span>
                            <button class="related-add-to-cart flex items-center bg-bistre text-fabric hover:bg-brownsugar transition-colors px-3 py-2 rounded" data-product-id="${product.id}" data-product-name="${product.name}" data-product-price="${product.price}">
                                <span class="mr-2">Add to Cart</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                return card;
            }
            
            function updateProgress(percent) {
                progressBar.style.width = `${percent}%`;
            }
            
            function hideLoadingOverlay() {
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 1000);
            }
        });
    </script>
</body>
</html>